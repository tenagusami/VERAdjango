from django.shortcuts import render

# Create your views here.
from vlbi import utility as u
from vlbi import query as q


def index(request):
    today = u.get_now()
    year, doy = u.datetime2year_doy_string(today)
    status = {'observation info': [], 'secZ info': []}
    schedule_list = status['observation info']
    default_table = {'year': year, 'doy': doy, 'schedule_list': schedule_list}
    return render(request, 'vlbi_schedule/index.djhtml', default_table)


def result(request, year='2018', doy='152'):
    year = request.POST.get('year', '2018')
    doy = request.POST.get('doynew')
    # year = '2018'
    # doy = '152'
    today = u.doy2datetime(year, doy)
    status = q.get_status_today_synchronous(today)
    schedule_list = status['observation info']
    result_table = {'year': year, 'doy': doy, 'schedule_list': schedule_list}
    return render(request, 'vlbi_schedule/index.djhtml', result_table)
